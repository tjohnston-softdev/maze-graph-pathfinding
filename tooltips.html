<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, maximum-scale=1">
		<title>Maze Graph Pathfinding</title>
		<script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
		<script src="https://unpkg.com/popper.js@1.14.7/dist/umd/popper.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/cytoscape-popper@1.0.5/cytoscape-popper.min.js"></script>
		<script src="https://unpkg.com/tippy.js@5/dist/tippy-bundle.iife.js"></script>
		<script>
		
			var nodeContents = 
			[
				{"data":{"id":1,"typeFlag":-1}},
				{"data":{"id":2,"typeFlag":0}},
				{"data":{"id":3,"typeFlag":0}},
				{"data":{"id":4,"typeFlag":0}},
				{"data":{"id":5,"typeFlag":0}},
				{"data":{"id":6,"typeFlag":0}},
				{"data":{"id":7,"typeFlag":0}},
				{"data":{"id":8,"typeFlag":0}},
				{"data":{"id":9,"typeFlag":0}},
				{"data":{"id":10,"typeFlag":0}},
				{"data":{"id":11,"typeFlag":0}},
				{"data":{"id":12,"typeFlag":0}},
				{"data":{"id":13,"typeFlag":1}}
			];
			
			var edgeContents = 
			[
				{"data":{"source":1,"target":4,"distance":"3","highlighted":false}},
				{"data":{"source":1,"target":2,"distance":"7","highlighted":false}},
				{"data":{"source":1,"target":3,"distance":"2","highlighted":false}},
				{"data":{"source":2,"target":3,"distance":"3","highlighted":false}},
				{"data":{"source":4,"target":12,"distance":"2","highlighted":false}},
				{"data":{"source":2,"target":5,"distance":"4","highlighted":false}},
				{"data":{"source":5,"target":3,"distance":"4","highlighted":false}},
				{"data":{"source":5,"target":6,"distance":"5","highlighted":false}},
				{"data":{"source":3,"target":8,"distance":"1","highlighted":false}},
				{"data":{"source":6,"target":8,"distance":"3","highlighted":false}},
				{"data":{"source":8,"target":7,"distance":"2","highlighted":false}},
				{"data":{"source":7,"target":13,"distance":"2","highlighted":false}},
				{"data":{"source":13,"target":11,"distance":"5","highlighted":false}},
				{"data":{"source":9,"target":11,"distance":"4","highlighted":false}},
				{"data":{"source":10,"target":11,"distance":"4","highlighted":false}},
				{"data":{"source":12,"target":9,"distance":"4","highlighted":false}},
				{"data":{"source":12,"target":10,"distance":"4","highlighted":false}},
				{"data":{"source":9,"target":10,"distance":"6","highlighted":false}}
			];
			
			var pathContents = {};
		
		</script>
		<style>
		
		body {
		font-family: helvetica;
		}
		
		#graphInfo {
		display: none;
		}
		
		#graphContainer {
		width: 100%;
		height: 500px;
		border: 2px solid black;
		display: none;
		}
		
		#numberContainer {
		width: 100%;
		text-align: center;
		}
		
		#numPathID {
		width: 80px;
		}
		
		.infoLabel {
		font-weight: bold;
		}
		
		h1 {
		text-align: center;
		}
		
		#loadContainer {
		margin: auto;
		width: 5%;
		padding: 10px;
		}
		
		/* Load spinner CSS from W3Schools */
		.loadSpinner {
		border: 16px solid #707070;
		border-top: 16px solid #3498db;
		border-radius: 50%;
		width: 60px;
		height: 60px;
		animation: spin 2s linear infinite;
		}

		@keyframes spin {
		0% { transform: rotate(0deg); }
		100% { transform: rotate(360deg); }
		}
		
		</style>
	</head>
	<body>
		<h1>Maze Graph Pathfinding</h1>
		<div id="graphInfo">
			<span class="infoLabel">Input Type:</span>
			<span class="infoValue">Relative</span>
			<br>
			
			<span class="infoLabel">Pathfinding Mode:</span>
			<span class="infoValue">Skipped</span>
			<br>
			
			<span class="infoLabel">File Created:</span>
			<span class="infoValue">2021-05-25 10:54:15</span>
			<br>
			
			
		</div>
		
		<br>
		<div id="graphContainer"></div>
		<br>
		<div id="loadContainer">
			<div class="loadSpinner"></div>
		</div>
		
		
		<script>
			var cytoscapeGraph = cytoscape(
			{
				container: document.getElementById("graphContainer"),
				elements: {nodes: nodeContents, edges: edgeContents},
				layout: {name: "preset"},
				style:
				[
					{
						selector: "node",
						style:
						{
							"shape": "circle",
							"background-color": "#7EA6E0",
							"border-color": "#000000",
							"border-width": 1,
							"label": "data(id)",
							"text-valign": "center",
							"text-halign": "center"
						
						}
					},
					{
						selector: "edge",
						style:
						{
							"line-color": "#000000",
							"width": 1
						}
					},
					{
						selector: "node[typeFlag < 0]",
						style: {"background-color": "#67AB9F", "border-width": 2}
					},
					{
						selector: "node[typeFlag > 0]",
						style: {"background-color": "#EA6B66", "border-width": 2}
					}
				]
			});
			
			
			function makeEdgeTooltip(edgeObj)
			{
				var tipRef = edgeObj.popperRef();
				
				edgeObj.tippy = tippy(document.createElement("div"),
				{
					lazy: false,
					followCursor: 'true',
					hideOnClick: true,
					flipOnUpdate: true,
					content: edgeObj.data("distance"),
					onShow(instance) {instance.popperInstance.reference = tipRef;}
				});
			}
			
			
			function displayGraph()
			{
				try
				{
					document.getElementById("graphInfo").style.display = "block";
					document.getElementById("graphContainer").style.display = "block";
					document.getElementById("loadContainer").style.display = "none";
				}
				catch(e)
				{
					alert("Error displaying graph.");
				}
			}
			
			cytoscapeGraph.ready(function()
			{
				displayGraph();
				
				cytoscapeGraph.edges().forEach(function(currentEdge)
				{
					makeEdgeTooltip(currentEdge);
				});
			});
			
			cytoscapeGraph.edges().bind("mouseover", function(event)
			{
				event.target.tippy.show();
			});
			
			cytoscapeGraph.edges().bind("mouseout", function(event)
			{
				event.target.tippy.hide();
			});
			
			
			var layoutObject = cytoscapeGraph.layout(
			{
				name: "cose",
				fit: true,
				animate: true,
				animationThreshold: 500,
				ready: function()
				{
					cytoscapeGraph.center();
				},
				stop: function()
				{
					var startPos = cytoscapeGraph.getElementById(1).position();
					var zoomSettings = {level: 1.0, position: startPos};
					cytoscapeGraph.zoom(zoomSettings);
				}
			});
			
			layoutObject.run();
		</script>
		
	</body>
</html>